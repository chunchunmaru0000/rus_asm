#!/bin/bash

file="$1"
dict=(
"executable исп"
    "punpcklqdq урспнвдв"
    "punpckhqdq урспввдв"
    "maskmovdqu мскбдвнр"
    "writeable изм"
    "cvttps2pi преоуо2уч"
    "cvttss2si преосо2зч"
    "cvttpd2pi преоуд2уч"
    "cvttsd2si преосд2зч"
    "extractps извлуо"
    "pcmpestrm усравям"
    "pcmpestri усравяи"
    "pcmpistrm усравням"
    "pcmpistri усравняи"
    "cvttps2dq преоуо2чч"
    "punpcklbw урспнбд"
    "punpcklwd урспндч"
    "punpckldq урспнчв"
    "punpckhbw урспвбд"
    "punpckhwd урспвдч"
    "punpckhdq урспвчв"
    "cvttpd2dq преоуд2чв"
    "readable чит"
    "writable изм"
    "movsldup бонудв"
    "movshdup бовудв"
    "unpcklps брспнуо"
    "unpcklpd брспнуд"
    "unpckhps брспуо"
    "unpckhpd брспуд"
    "cvtpi2ps преуч2уо"
    "cvtsi2ss пресч2со"
    "cvtpi2pd преуч2уд"
    "cvtsi2sd пресч2сд"
    "cvtps2pi преуо2уч"
    "cvtss2si пресо2зч"
    "cvtpd2pi преуд2уч"
    "cvtsd2si пресд2зч"
    "nsertps вствуо"
    "movmskps бмзуо"
    "movmskpd бмзуд"
    "cvtps2pd преуо2уд"
    "cvtpd2ps преуд2уо"
    "cvtss2sd пресо2сд"
    "cvtsd2ss пресд2со"
    "cvtdq2ps пречч2уо"
    "cvtps2dq преуо2чч"
    "packsswb уупкзндб"
    "packuswb уупкбндб"
    "packssdw уупкзнчд"
    "addsubpd плюсминсуд"
    "addsubps плюсминсуо"
    "pmovmskb убмскб"
    "cvtpd2dq преуд2чв"
    "cvtdq2pd пречв2уд"
    "segment участок"
    "syscall сзов"
    "movhlps бвн"
    "movlhps бнв"
    "movddup бдудв"
    "movntps бнвуо"
    "movntpd бнвуд"
    "ucomiss нусравсо"
    "ucomisd нусравсд"
    "roundps окруо"
    "roundpd окруд"
    "roundss окрсо"
    "roundsd окрсд"
    "blendps смшуо"
    "blendpd смшуд"
    "pblendw усмшд"
    "palignr урвнп"
    "mpsadbw мусумарбд"
    "rsqrtps окрньуо"
    "rsqrtss окрньсо"
    "pcmpgtb усраввб"
    "pcmpgtw усраввд"
    "pcmpgtd усраввч"
    "pcmpeqb усраврб"
    "pcmpeqw усраврд"
    "pcmpeqd усраврч"
    "pshuflw утаснд"
    "pshufhw утасвд"
    "psubusb уминсбзнб"
    "psubusw уминсбзнд"
    "paddusb уплюснрзб"
    "paddusw уплюснрзд"
    "pmulhuw уумнвбзд"
    "movntdq бнвчв"
    "pmuludq уумннрчв"
    "pmaddwd ууплюсдч"
    "loopne цклнр"
    "loopnz цклн0"
    "rflags рфлаги"
    "movsxd быть"
    "eflags ефлаги"
    "movups бнруо"
    "movupd бнруд"
    "movlps бнуо"
    "movlpd бнуд"
    "movhps бвуо"
    "movhpd бвуд"
    "movaps бууо"
    "movapd бууд"
    "comiss супчсо"
    "comisd супчсд"
    "pextrb уизвлб"
    "pextrw уизвлд"
    "pinsrb увствб"
    "pextrq уизвл"
    "pextrd уизвл"
    "pinsrq увтсв"
    "pinsrd увтсв"
    "sqrtps крньуо"
    "sqrtss крньсо"
    "sqrtpd крньуд"
    "sqrtsd крньсд"
    "andnps инуо"
    "andnpd инуд"
    "movdqa бытьчвр"
    "movdqu бытьчвнр"
    "psrldq усплдв"
    "pslldq усллдв"
    "haddpd гплюсуд"
    "haddps гплюсуо"
    "hsubpd гминсуд"
    "hsubps гминсуо"
    "pshufd утасч"
    "movnti бнвч"
    "pmullw уумннд"
    "pminub уминмбзб"
    "pmaxub умаксбзб"
    "pmulhw уумнвд"
    "psubsb уминсзб"
    "psubsw уминсзд"
    "pminsw уминмзд"
    "paddsb уплюсзб"
    "paddsw уплюсзд"
    "pmaxsw умаксзд"
    "psadbw усумарбд"
    "pinsrw увстврд"
    "shufps тасуо"
    "shufpd тасуд"
    "cmpsd сравсдэ"
    "xmm15 э15"
    "xmm14 э14"
    "xmm13 э13"
    "xmm12 э12"
    "xmm11 э11"
    "xmm10 э10"
    "repne повтнр"
    "repnz повтн0"
    "leave выйти"
    "enter войти"
    "retq воздфв"
    "scasq осмсв"
    "scasd осмсч"
    "scasw осмсд"
    "scasb осмсб"
    "lodsq загсв"
    "lodsd загсч"
    "lodsw загсд"
    "zword ябайт"
    "yword юбайт"
    "xword эбайт"
    "lodsb загсб"
    "stosq выгсв"
    "stosd выгсч"
    "stosw выгсд"
    "stosb выгсб"
    "flags флаги"
    "pushf токлф"
    "callf зовф"
    "entry вход"
    "fwait ожид"
    "pause пауза"
    "dword чбайт"
    "qword вбайт"
    "outsd вывсч"
    "outsw вывсд"
    "outsb вывсб"
    "cmpsq сравсв"
    "cmpsd сравсч"
    "cmpsw сравсд"
    "cmpsb сравсб"
    "movsq бытьсв"
    "movsd бытьсч"
    "movsw бытьсд"
    "movsb бытьсб"
    "loope цклр"
    "loopz цкл0"
    "jrcxz идрсх0"
    "jecxz идесх0"
    "movss бсо"
    "movsd бсд"
    "rcpps оуо"
    "rcpss осо"
    "andps иуо"
    "andpd иуд"
    "xorps исклуо"
    "xorpd исклуд"
    "addps плюсуо"
    "addss плюссо"
    "addpd плюсуд"
    "addsd плюссд"
    "mulps умнуо"
    "mulss умнсо"
    "mulpd умнуд"
    "mulsd умнсд"
    "subps минсуо"
    "subss минссо"
    "subpd минсуд"
    "subsd минссд"
    "minps минмуо"
    "minss минмсо"
    "minpd минмуд"
    "minsd минмсд"
    "divps делуо"
    "divss делсо"
    "divpd делуд"
    "divsd делсд"
    "maxps максуо"
    "maxss макссо"
    "maxpd максуд"
    "maxsd макссд"
    "psrlw усплд"
    "psraw успад"
    "psllw усллд"
    "psrld усплч"
    "psrad успач"
    "pslld усллч"
    "psrlq усплв"
    "psllq усллв"
    "paddq уплюсв"
    "pandn уин"
    "pavgb усрдб"
    "pavgw усрдд"
    "lddqu здвнр"
    "psubb уминсб"
    "psubw уминсд"
    "psubd уминсч"
    "psubq уминсв"
    "paddb уплюсб"
    "paddw уплюсд"
    "paddd уплюсч"
    "cmpps сравуо"
    "cmpss сравсо"
    "cmppd сравуд"
    "xmm9 э9"
    "xmm8 э8"
    "xmm7 э7"
    "xmm6 э6"
    "xmm5 э5"
    "xmm4 э4"
    "xmm3 э3"
    "xmm2 э2"
    "xmm1 э1"
    "xmm0 э0"
    "nt1 прер1"
    "r15d р15ч"
    "r14d р14ч"
    "r13d р13ч"
    "r12d р12ч"
    "r11d р11ч"
    "r10d р10ч"
    "r15d е15"
    "r14d е14"
    "r13d е13"
    "r12d е12"
    "r11d е11"
    "r10d е10"
    "r15w р15д"
    "r14w р14д"
    "r13w р13д"
    "r12w р12д"
    "r11w р11д"
    "r10w р10д"
    "r15w д15"
    "r14w д14"
    "r13w д13"
    "r12w д12"
    "r11w д11"
    "r10w д10"
    "r15b р15б"
    "r14b р14б"
    "r13b р13б"
    "r12b р12б"
    "r11b р11б"
    "r10b р10б"
    "r15b б15"
    "r14b б14"
    "r13b дб3"
    "r12b б12"
    "r11b б11"
    "r10b б10"
    "ldtr лдтр"
    "test проб"
    "mul зумн"
    "retf воздф"
    "jmpf идтиф"
    "push толк"
    "mul зумн"
    "div здел"
    "call зов"
    "jnle иднмр"
    "jnge иднбр"
    "jnbe иднпр"
    "jnae иднвр"
    "lock атом"
    "byte байт"
    "wait ожид"
    "xchg обмн"
    "nsd ввсч"
    "nt3 прер3"
    "nsw ввсд"
    "lahf выгахф"
    "sahf загахф"
    "popf вытф"
    "nsb ввсб"
    "cdqe перечв"
    "cwde передч"
    "word дбайт"
    "loop цкл"
    "dpps спруо"
    "dppd спруд"
    "movd бытьэ"
    "movq бытьэ"
    "orps илиуо"
    "orpd илиуд"
    "pand уи"
    "pxor уискл"
    "rip рип"
    "out вывд"
    "r15 р15"
    "r14 р14"
    "r13 р13"
    "r12 р12"
    "r11 р11"
    "r10 р10"
    "rsp рсп"
    "rbp рбп"
    "rdi рди"
    "rsi рси"
    "rdx рдх"
    "rcx рсх"
    "rbx рбх"
    "rax рах"
    "lea задр"
    "eip еип"
    "r9d р9ч"
    "r8d р8ч"
    "r9d е9"
    "r8d е8"
    "esp есп"
    "ebp ебп"
    "edi еди"
    "esi еси"
    "edx едх"
    "ecx есх"
    "ebx ебх"
    "eax еах"
    "r9w р9д"
    "r8w р8д"
    "r9w д9"
    "r8w д8"
    "r9b р9б"
    "r8b р8б"
    "r9b б9"
    "r8b б8"
    "sar сдап"
    "shr сдвп"
    "sal сдал"
    "shl сдвл"
    "rcr врсп"
    "rcl врсл"
    "ror врщп"
    "rol врщл"
    "sbb минсп"
    "adc плюсс"
    "xor искл"
    "mul умн"
    "div дел"
    "and и"
    "cmp срав"
    "sub минс"
    "add плюс"
    "mov быть"
    "jng иднб"
    "jle идмр"
    "jge идбр"
    "jnl иднм"
    "jpo иднч"
    "jnp иднч"
    "jns иднз"
    "jna иднв"
    "jbe идпр"
    "jne иднр"
    "jnz идн0"
    "jnc иднс"
    "jae идвр"
    "jnb иднп"
    "jno идни"
    "ret возд"
    "dec умнш"
    "nc увлч"
    "pop выт"
    "nt прер"
    "jmp идти"
    "jle идмр"
    "jpe идчр"
    "cqo преввш"
    "cdq превчв"
    "cwd превдч"
    "cbw перебд"
    "nop ыыы"
    "std урф"
    "cld орф"
    "sti упрерф"
    "cli опрерф"
    "stc усф"
    "clc осф"
    "cmc нсф"
    "hlt ост"
    "neg нег"
    "not не"
    "rep повт"
    "por уили"
    "n ввд"
    "r9 р9"
    "r8 р8"
    "p ип"
    "di ди"
    "si си"
    "bp бп"
    "sp сп"
    "bx бх"
    "dx дх"
    "cx сх"
    "ax ах"
    "bl бл"
    "cl сл"
    "dl дл"
    "al ал"
    "bh бг"
    "ch сг"
    "dh дг"
    "ah аг"
    "tr тр"
    "gs гс"
    "fs фс"
    "ss сс"
    "es ес"
    "ds дс"
    "cs кс"
    "or или"
    "jl идм"
    "jg идб"
    "jp идч"
    "js идз"
    "ja идв"
    "je идр"
    "jz ид0"
    "jc идс"
    "jb идп"
    "jo иди"
# инструкции типа rol1 в fasmе не существуют и являются просто rol
#    "fs испфс" "gs испгс"
)

wass=0
wasn0=0

for pair in "${dict[@]}"; do
	read -r old new <<< "$pair"
	was=$(grep -o "$old" "$file" | wc -l)
	sed -i "s/$old/$new/g" $file

	if [ "$was" -gt 0 ]; then
		echo -e "$old\t->\t$new\t$was раз"
		wass=$((wass + was))
		wasn0=$((wasn0 + 1))
	fi
done

echo -e "слов заменено: $wasn0 раз, замен всего: $wass"
